{"version":3,"file":"pages/location/index.js","sources":["webpack:///./src/pages/location/index.jsx","webpack:///./src/pages/location/index.jsx?46f6","webpack:///./src/pages/location/index.less"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Taro, { useDidShow } from \"@tarojs/taro\"\nimport { View, Text, Input, CoverImage, Picker } from '@tarojs/components'\nimport QQMapWX from '../../utils/QQMap'\nimport { Toast } from \"../../utils/tool\"\nimport './index.less'\n\nexport default function index() {\n    const [filterList, setFilterList] = useState([])\n    const [cityList, setCityList] = useState([])\n    const [city, setCity] = useState('')\n\n    useDidShow(() => {\n        Taro.setNavigationBarTitle({\n            title: \"位置\"\n        })\n        Taro.request({\n            url: `http://apis.map.qq.com/ws/district/v1/list`,\n            method: 'GET',\n            data: {\n                key: 'B46BZ-TDXKW-Q5WRQ-OIKGT-UCW4K-6QBXD'\n            },\n            success: function (res) {\n                if (res.statusCode === 200) {\n                    setCityList(res.data.result[0].map(v => v.fullname))\n                    setCity(res.data.result[0][0].fullname)\n                } else {\n                    Toast('失败', 'none', 1000)\n                }\n            }\n        })\n    })\n\n    function inputText(e) {\n        console.log(e.detail.value, \"e\")\n        if (e.detail.value === '') {\n            setFilterList([])\n        } else {\n            QQMapWX.search({\n                keyword: e.detail.value,\n                region: city,\n                complete: function (res) {\n                    setFilterList(res.data)\n                }\n            })\n        }\n\n    }\n\n    function tapAddress(params) {\n        Taro.navigateTo({\n            url: `/pages/map/index?search=${Taro.Current.router.params.search}&title=${params.title}&lat=${params.location.lat}&lng=${params.location.lng}`,\n        })\n        setFilterList([])\n    }\n\n    function onChangeCity(e) {\n        setCity(cityList[e.detail.value])\n    }\n\n    return (\n        <View>\n            <View className=\"nav\">\n                {/* <Text className=\"city\">北京</Text> */}\n                <View className=\"city\">\n                    <Picker mode='selector' range={cityList} onChange={(e) => { onChangeCity(e) }}>\n                        <View className='picker' >\n                            {city}\n                        </View>\n                    </Picker>\n                </View>\n                <Input class='address' type=\"search\" onInput={(e) => { inputText(e) }} placeholder=\"请输入\"></Input>\n            </View>\n            {\n                filterList && filterList.map(item => {\n                    return <View className=\"item\">\n                        <CoverImage className='img' src='../../assets/image/ditu.png' />\n                        <View className=\"text\" key={item.id} onTap={() => { tapAddress(item) }}>\n                            <Text className=\"title\" >{item.title}</Text>\n                            <Text className=\"value\" >{item.address}</Text>\n                        </View>\n                    </View>\n                })\n            }\n        </View >\n    )\n}\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/location/index', {}, config || {}))\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAFA;AAIA;AACA;AACA;AAbA;AAJA;AACA;AAoBA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAnBA;AA0BA;;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;A","sourceRoot":""}